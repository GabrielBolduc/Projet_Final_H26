<div class="admin-page">
  
  <header class="admin-top-bar">
    <button mat-stroked-button class="btn-new" [routerLink]="['/tasks/new']">
      <mat-icon>add</mat-icon>{{ 'TACHES.ADD_TASK' | translate }}
    </button>
    <h1 class="header-title">{{ 'TACHES.TABLEAU' | translate }}</h1>
    
  </header>

  <main>
    <section class="admin-section">
      
      <div class="task-list">
        @for (task of tasks(); track task.id) {
          
          <mat-card class="fest-card">
            <mat-card-content class="card-content-layout">
              
              <div class="main-info">
                <h3>{{ task.title }}</h3>
                
                <button mat-stroked-button class="btn-dash" [routerLink]="['/tasks', task.id]">
                  {{ 'TACHES.SHOW' | translate }}
                </button>

              </div>
              @if (isImage(task.file_url)) {
                  <div class="image-container">
                      <img 
                      [src]="task.file_url"
                      class="task-thumbnail"
                      alt="Image de la tÃ¢che"
                      />
                  </div>
              }
              <div class="action-section">
                <button class="icon-btn edit" (click)="handleEditClick(task.id!)" title="Modifier">
                    <mat-icon>edit_square</mat-icon>
                </button>
                <button class="icon-btn trash" (click)="handleClick(task.id!)" title="Supprimer">
                  <mat-icon>delete_outline</mat-icon>
                </button>
              </div>
               
              
            </mat-card-content>
          </mat-card>

        }
      </div>
    </section>
  </main>
</div>